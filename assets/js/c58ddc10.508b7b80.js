"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5951],{5680:(e,t,a)=>{a.d(t,{xA:()=>l,yg:()=>m});var n=a(6540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),d=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},l=function(e){var t=d(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=d(a),f=r,m=u["".concat(c,".").concat(f)]||u[f]||p[f]||o;return a?n.createElement(m,i(i({ref:t},l),{},{components:a})):n.createElement(m,i({ref:t},l))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},2971:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var n=a(8168),r=(a(6540),a(5680));const o={id:"archived resources",sidebar_position:4,slug:"/archived-resources"},i="Archived Orcfax resources",s={unversionedId:"developer-manual/archived resources",id:"developer-manual/archived resources",title:"Archived Orcfax resources",description:"This section contains instructions, and commentary relating to Orcfax",source:"@site/docs/developer-manual/archived-resources.md",sourceDirName:"developer-manual",slug:"/archived-resources",permalink:"/archived-resources",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"archived resources",sidebar_position:4,slug:"/archived-resources"},sidebar:"tutorialSidebar",previous:{title:"Orcfax policies",permalink:"/policies"},next:{title:"TERMS OF SERVICE",permalink:"/terms-of-service"}},c={},d=[{value:"v0",id:"v0",level:2},{value:"Policy details",id:"policy-details",level:3},{value:"In use",id:"in-use",level:3},{value:"v0 datum structure",id:"v0-datum-structure",level:3},{value:"v0 JSON-LD schema",id:"v0-json-ld-schema",level:4},{value:"Reading v0 datum on-chain",id:"reading-v0-datum-on-chain",level:3},{value:"Reading v0 datum off-chain",id:"reading-v0-datum-off-chain",level:3}],l={toc:d},u="wrapper";function p(e){let{components:t,...o}=e;return(0,r.yg)(u,(0,n.A)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"archived-orcfax-resources"},"Archived Orcfax resources"),(0,r.yg)("p",null,"This section contains instructions, and commentary relating to Orcfax\nsolution versions and/or components ",(0,r.yg)("strong",{parentName:"p"},"which are no longer in operation"),". This\ninformation has been left as an educational resource and as a testament to the\ndevelopment journey of the Orcfax oracle solution."),(0,r.yg)("h2",{id:"v0"},"v0"),(0,r.yg)("p",null,"The v0 solution offered by Orcfax on Cardano mainnet was released in 2023 and\nutilized the Cardano Open Oracle Protocol (",(0,r.yg)("a",{parentName:"p",href:"https://github.com/mlabs-haskell/cardano-open-oracle-protocol/"},"COOP"),") to format and publish\ninformation on-chain. The protocol constituted a set of technical guidelines\nthat specified a process, and format, for the publication and consumption of\noff-chain data by smart contracts on the Cardano blockchain."),(0,r.yg)("p",null,"The Orcfax team developed the Cardano Open Oracle Protocol as a Catalyst funded\nresearch project that aimed to maximize the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.cardano.org/learn/eutxo-explainer/"},"eUTXO")," model and leveraged\ndesign principles, ",(0,r.yg)("a",{parentName:"p",href:"https://docs.cardano.org/about-cardano/evolution/upgrades/vasil/#reference-inputs-cip-31"},"CIP-31"),", and ",(0,r.yg)("a",{parentName:"p",href:"https://docs.cardano.org/about-cardano/evolution/upgrades/vasil/#inline-datums-cip-32"},"CIP-32")," to prioritize a\ncost-sensitive, post-Vasil native method for publishing secure, signed, datums\non-chain for Reference Input consumption by Cardano dApps."),(0,r.yg)("p",null,"The initial version of COOP was developed in collaboration with ",(0,r.yg)("a",{parentName:"p",href:"https://mlabs.city/"},"MLabs"),"\nconsultancy. The guidelines and specification in COOP are free, open-source, and\ncan be implemented by any other project seeking to develop their own Cardano\noracle feeds."),(0,r.yg)("p",null,"Shortly after this version was released, IOG discontinued support for both\nthe Plutus Application Backend (PAB) and Plutus-Chain-Index. Both were critical\ncomponents in the COOP v0 stack. Aware of the discontinued support, the Orcfax\nteam partnered with technical consultants through MLabs to replace the\ncomponents. Unfortunately, the plutus-chain-index component failed before a\nreplacement could be rolled-out."),(0,r.yg)("p",null,"And so v0 was suspended in May of 2024."),(0,r.yg)("p",null,"More information pertaining to this failure can be found in both the\n",(0,r.yg)("a",{parentName:"p",href:"https://medium.com/@orcfax/orcfax-feed-suspension-and-protocol-upgrade-a45709dafb56"},"public announcement")," and in the subsequent incident\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/orcfax/Incidents/issues/38"},"report"),"."),(0,r.yg)("p",null,"Additionally, users and developers may find it informative to review the entire\nv0 ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/orcfax/Incidents"},"Incidents")," repository as it contains many critical learnings\nfrom the implementation of v0."),(0,r.yg)("h3",{id:"policy-details"},"Policy details"),(0,r.yg)("p",null,"Links and information pertaining to policy IDs and smart contract addresses can\nbe found in ",(0,r.yg)("a",{parentName:"p",href:"policies"},"Policies"),"."),(0,r.yg)("h3",{id:"in-use"},"In use"),(0,r.yg)("p",null,"Minting policy identifiers were critical as fact statements were to be verified\nas having come from a known source. These identifiers also provided the ability\nto filter all of the UTxO at a given smart contract address and to filter out\nthose sent by others to the same address."),(0,r.yg)("p",null,"Users were required to use the following information to identify the latest\nfacts published."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Minting policy ID."),(0,r.yg)("li",{parentName:"ul"},"Datum format, including:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Most recent (",(0,r.yg)("inlineCode",{parentName:"li"},"ValueReference -> PropertyValue[1] -> value)"),", i.e. the\nlargest POSIX timestamp compared to other fact statement datum,"),(0,r.yg)("li",{parentName:"ul"},'Feed name, e.g. "ADA-USD".')))),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note: Users on preprod will find a volume of test data that was not ever\nretired as Orcfax previously used this space as a testing sandbox.")),(0,r.yg)("p",null,"In this model, unconsumed reference inputs were those still available for smart\ncontracts to use on-chain. Spending a UTxO with a reference input would render\nit unusable in a smart contract (though the data was still visible in the\nhistorical transaction). This process of consuming reference inputs is also\nreferred to as ",(0,r.yg)("em",{parentName:"p"},"garbage collection")," or the ",(0,r.yg)("em",{parentName:"p"},"retiring")," of fact statements."),(0,r.yg)("p",null,"At the time of this version, Orcfax committed to a mainnet policy whereby two\nunspent fact UTxO would remain on-chain at all times in order to provide\ncontinuous datum coverage."),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"Note: maintaining at least two datum on-chain gave smart contracts (and their\ndevelopers) access to the most current datum and the datum before that for\ninspection. The POSIX timestamps denoting a valid-from and valid-through\nperiod could be inspected to ensure that they were still within a valid\nwindow.")),(0,r.yg)("p",null,"For more information about the use of reference inputs and the inline datum\nutilized in COOP v0, see the relevant COOP ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/mlabs-haskell/cardano-open-oracle-protocol/blob/9e9c9aedba84d32e424b1dd116b4734e1a42f3bc/coop-docs/00-design.md#cardano-features-enabling-oracles"},"design document"),"."),(0,r.yg)("h3",{id:"v0-datum-structure"},"v0 datum structure"),(0,r.yg)("p",null,"All fact statements were structured as ",(0,r.yg)("a",{parentName:"p",href:"https://json-ld.org/"},"JSON-LD")," objects\nbefore being serialized into the Concise Binary Object Representation\n(",(0,r.yg)("a",{parentName:"p",href:"https://cbor.io/"},"CBOR"),") used in Cardano transactions."),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Fact Statement",src:a(2039).A,width:"3232",height:"1237"})),(0,r.yg)("h4",{id:"v0-json-ld-schema"},"v0 JSON-LD schema"),(0,r.yg)("p",null,"The Orcfax V0 datum was translated to on-chain CBOR from the following JSON\nschema (example given is from Sep 28, 2023):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "@context": "https://schema.org",\n    "type": "PropertyValue",\n    "name": "ADA-USD|USD-ADA",\n    "value": [0.249495, 4.008096354636367],\n    "valueReference": [\n        {\n            "@type": "PropertyValue",\n            "name": "validFrom",\n            "value": 1695939870811\n        },\n        {\n            "@type": "PropertyValue",\n            "name": "validThrough",\n            "value": 1695943470811\n        }\n    ],\n    "identifier": {\n        "propertyID": "Arkly Identifier",\n        "type": "PropertyValue",\n        "value": "urn:orcfax:4ae10640-10b9-4c23-af1d-c4a9dbd8938d"\n    },\n    "_:contentSignature": "40330ff2597c399ddaaab6c1dbaab52173ef82bf7f08d3ca84585ab5e76429a0"\n}\n')),(0,r.yg)("h3",{id:"reading-v0-datum-on-chain"},"Reading v0 datum on-chain"),(0,r.yg)("p",null,"Orcfax fact statement datum were readable on-chain as Cardano\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/perturbing/vasil-tests/blob/main/reference-inputs-cip-31.md"},"Reference Inputs"),"."),(0,r.yg)("p",null,"To have read the ",(0,r.yg)("inlineCode",{parentName:"p"},"ADA-USD|USD-ADA")," Mainnet feed, users were encouraged to check\nthe latest transaction issued by the\n",(0,r.yg)("a",{parentName:"p",href:"https://cexplorer.io/address/addr1w8tcecfy7np3sduzn99ffuv8qx2sa8v977l0xql8ca7lgkgq7lqh2/tx#data"},"feed smart contract"),"."),(0,r.yg)("h3",{id:"reading-v0-datum-off-chain"},"Reading v0 datum off-chain"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"https://pycardano.readthedocs.io/"},"PyCardano")," SDK provided convenient\nhelper functions for converting on-chain CBOR."),(0,r.yg)("p",null,"The Orcfax team created an open-source PyCardano\n",(0,r.yg)("a",{parentName:"p",href:"https://github.com/orcfax/datum-demo/tree/main#readme"},"demo script")," to assist\nusers in reading and parsing the on-chain Orcfax datum."),(0,r.yg)("p",null,"This script converted the Cardano transaction's CBOR serialization to human and\nmachine-readable JSON while simultaneously logging various details about the\nDatum as it went."),(0,r.yg)("p",null,"It's very easy to customize the configuration options of this script to match\nthe requirements of another dApp."),(0,r.yg)("p",null,"This resource was made freely available under an open-source Apache\nv2.0 license so that users could test, integrate, and extend their own solutions\nby integrating Orcfax fact statement feeds."),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"demo script output:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},'2023-09-28T16:24:13Z INFO :: read_datum.py:264:read_datum() :: entering this script...\n2023-09-28T16:24:13Z INFO :: read_datum.py:265:read_datum() :: oracle smart contract: addr_test1wrtcecfy7np3sduzn99ffuv8qx2sa8v977l0xql8ca7lgkgmktuc0\n2023-09-28T16:24:15Z INFO :: read_datum.py:226:get_latest_utxo() :: inspecting \'862\' UTxOs\n2023-09-28T16:24:15Z WARNING :: read_datum.py:254:get_latest_utxo() :: \'7.00\' hours since datum was published (1695943470811)\n2023-09-28T16:24:15Z INFO :: read_datum.py:191:validate_utxo() :: inspecting the utxo for valid auth tokens\n2023-09-28T16:24:15Z INFO :: read_datum.py:217:validate_utxo() :: the utxo is valid, it contains the correct auth token\n2023-09-28T16:24:15Z INFO :: read_datum.py:79:display_utxo() :: (input) transaction id: 078d548b0ed91b95164d0baaf2b486161e06aab84483d99ed01a2180090ab0f3\n2023-09-28T16:24:15Z INFO :: read_datum.py:80:display_utxo() :: (output) transaction addr: addr_test1wrtcecfy7np3sduzn99ffuv8qx2sa8v977l0xql8ca7lgkgmktuc0\n2023-09-28T16:24:15Z INFO :: read_datum.py:81:display_utxo() :: (output) datum cbor:\n\n590207d8799fa74840636f6e746578745268747470733a2f2f736368656d612e6f7267525f3a636f6e74656e745369676e61747572655840343033333066663235393763333939646461616162366331646261616235323137336566383262663766303864336361383435383561623565373634323961304a6964656e746966696572a34a70726f706572747949445041726b6c79204964656e74696669657244747970654d50726f706572747956616c75654576616c7565582f75726e3a6f72636661783a34616531303634302d313062392d346332332d616631642d633461396462643839333864446e616d654f4144412d5553447c5553442d41444144747970654d50726f706572747956616c75654576616c75659fd87c9f1a0003ce971bfffffffffffffffaffd87c9f1b000e3d57a771924e1bfffffffffffffff1ffff4e76616c75655265666572656e63659fa34540747970654d50726f706572747956616c7565446e616d654976616c696446726f6d4576616c75651b0000018adde4c05ba34540747970654d50726f706572747956616c7565446e616d654c76616c69645468726f7567684576616c75651b0000018ade1baedbff5820303443413030303148424559394b4b34343950314345513850483744544a5954d87a9f1b0000018ade1baedbff581c90b121aa6b689200adf7ed115040a96375d2b68e23633d6864c53a91ff\n\n2023-09-28T16:24:15Z INFO :: read_datum.py:84:display_utxo() :: (output) Tx cost: 3.42214 ADA\n2023-09-28T16:24:15Z INFO :: read_datum.py:151:decode_utxo() ::\n\n{\n  "@context": "https://schema.org",\n  "type": "PropertyValue",\n  "name": "ADA-USD|USD-ADA",\n  "value": [\n    0.249495,\n    4.008096354636367\n  ],\n  "valueReference": [\n    {\n      "@type": "PropertyValue",\n      "name": "validFrom",\n      "value": 1695939870811\n    },\n    {\n      "@type": "PropertyValue",\n      "name": "validThrough",\n      "value": 1695943470811\n    }\n  ],\n  "identifier": {\n    "propertyID": "Arkly Identifier",\n    "type": "PropertyValue",\n    "value": "urn:orcfax:4ae10640-10b9-4c23-af1d-c4a9dbd8938d"\n  },\n  "_:contentSignature": "40330ff2597c399ddaaab6c1dbaab52173ef82bf7f08d3ca84585ab5e76429a0"\n}\n\n2023-09-28T16:24:15Z INFO :: read_datum.py:152:decode_utxo() :: oracle datum identifier (internal): b\'04CA0001HBEY9KK449P1CEQ8PH7DTJYT\'\n2023-09-28T16:24:15Z INFO :: read_datum.py:157:decode_utxo() :: oracle datum timestamp: 2023-09-28T23:24:30Z (1695943470811)\n2023-09-28T16:24:15Z INFO :: read_datum.py:170:pretty_log_value() :: ADA-USD: 0.249495\n2023-09-28T16:24:15Z INFO :: read_datum.py:170:pretty_log_value() :: USD-ADA: 4.008096354636367\n')))}p.isMDXComponent=!0},2039:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/2023-09-30--Orcfax--fact-statement-0ff642e16e956a03a7829c3106892607.jpg"}}]);